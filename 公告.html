<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>公告</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            padding-bottom: 60px; /* 为固定的底部导航留出空间 */
        }

        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: aliceblue;
            height: 50px;
            line-height: 50px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            font-size: 24px;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .menu-icon {
            position: absolute;
            left: 15px;
            cursor: pointer;
            font-size: 24px;
        }

        .content {
            margin-top: 50px;
            padding: 15px;
        }

        .entry {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 5px;
            background-color: #f9f9f9;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .date {
            font-weight: bold;
            color: #333;
        }

        .month-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: white;
            height: 50px;
            line-height: 50px;
            text-align: center;
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .month-nav button {
            padding: 5px 15px;
            margin: 0 10px;
            border: none;
            background-color: transparent;
            cursor: pointer;
            font-size: 16px;
        }

        .month-nav button:disabled {
            color: #ccc;
            cursor: not-allowed;
        }

        .current-month-display {
            font-size: 18px;
            font-weight: bold;
            min-width: 100px;
            text-align: center;
        }

        .month-section {
            display: none;
        }

        .month-section.active {
            display: block;
        }

        .sidebar {
            position: fixed;
            top: 0;
            left: -250px;
            width: 250px;
            height: 100%;
            background-color: #f1f1f1;
            overflow-x: hidden;
            transition: 0.3s;
            z-index: 200;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
        }

        .sidebar-header {
            padding: 15px;
            background-color: #e0e0e0;
            text-align: center;
            font-weight: bold;
            font-size: 18px;
        }

        .sidebar ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .sidebar li {
            padding: 10px 15px;
            border-bottom: 1px solid #ddd;
            cursor: pointer;
        }

        .sidebar li:hover {
            background-color: #ddd;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 150;
        }

        .close-btn {
            position: absolute;
            top: 0;
            right: 15px;
            font-size: 30px;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div class="top-bar">
        <div class="menu-icon" id="menuIcon">☰</div>
        公告
    </div>

    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            月份导航
            <span class="close-btn" id="closeBtn">×</span>
        </div>
        <ul id="monthList">
            <!-- 月份列表将通过JavaScript动态生成 -->
        </ul>
    </div>

    <div class="overlay" id="overlay"></div>

    <div class="content" id="content">
        <!-- 公告内容将通过JavaScript动态生成 -->
    </div>

    <div class="month-nav" id="monthNav">
        <button id="prevMonth" disabled>◀</button>
        <div class="current-month-display" id="currentMonthDisplay">2025.7</div>
        <button id="nextMonth">▶</button>
    </div>

    <script>
        //公告
        const announcements = [
            { date: "2025-07-17", content: "加入公告功能（借助了github网站）" },
            { date: "2025-07-16", content: "本项目从今日开始创作" },
			{ date: "2000-05-26", content: "我也不知道写这个干啥" },
        ];

        // 按月份分组
        const announcementsByMonth = {};
        announcements.forEach(item => {
            const [year, month] = item.date.split('-');
            const monthKey = `${year}-${month}`;
            if (!announcementsByMonth[monthKey]) {
                announcementsByMonth[monthKey] = [];
            }
            announcementsByMonth[monthKey].push(item);
        });

        // 获取所有月份（按降序排列）
        const months = Object.keys(announcementsByMonth).sort().reverse();
        let currentMonthIndex = 0;

        // 生成公告内容
        function renderAnnouncements() {
            const contentDiv = document.getElementById('content');
            contentDiv.innerHTML = '';
            
            // 为每个月份创建一个section
            months.forEach((monthKey, index) => {
                const [year, month] = monthKey.split('-');
                const monthSection = document.createElement('div');
                monthSection.className = 'month-section';
                monthSection.id = `month-${monthKey}`;
                
                if (index === currentMonthIndex) {
                    monthSection.classList.add('active');
                }
                
                // 添加月份标题
                const monthHeader = document.createElement('h2');
                monthHeader.textContent = `${year}年${month}月`;
                monthSection.appendChild(monthHeader);
                
                // 添加该月的所有公告
                announcementsByMonth[monthKey]
                    .sort((a, b) => b.date.localeCompare(a.date)) // 按日期降序排列
                    .forEach(item => {
                        const entry = document.createElement('div');
                        entry.className = 'entry';
                        entry.innerHTML = `
                            <div class="date">${item.date}</div>
                            <div>${item.content}</div>
                        `;
                        monthSection.appendChild(entry);
                    });
                
                contentDiv.appendChild(monthSection);
            });
        }

        // 更新当前月份显示
        function updateMonthDisplay() {
            const currentMonthKey = months[currentMonthIndex];
            const [year, month] = currentMonthKey.split('-');
            document.getElementById('currentMonthDisplay').textContent = `${year}.${month}`;
            
            // 禁用/启用翻页按钮
            document.getElementById('prevMonth').disabled = currentMonthIndex === 0;
            document.getElementById('nextMonth').disabled = currentMonthIndex === months.length - 1;
        }

        // 生成侧边栏月份列表
        function renderSidebarMonths() {
            const monthList = document.getElementById('monthList');
            monthList.innerHTML = '';
            
            months.forEach((monthKey, index) => {
                const [year, month] = monthKey.split('-');
                const monthItem = document.createElement('li');
                monthItem.textContent = `${year}年${month}月`;
                monthItem.addEventListener('click', () => {
                    currentMonthIndex = index;
                    switchMonth();
                    closeSidebar();
                });
                
                monthList.appendChild(monthItem);
            });
        }

        // 侧边栏交互
        function openSidebar() {
            document.getElementById('sidebar').style.left = '0';
            document.getElementById('overlay').style.display = 'block';
            document.body.style.overflow = 'hidden'; // 防止背景滚动
        }

        function closeSidebar() {
            document.getElementById('sidebar').style.left = '-250px';
            document.getElementById('overlay').style.display = 'none';
            document.body.style.overflow = ''; // 恢复背景滚动
        }

        // 切换月份
        function switchMonth() {
            // 隐藏所有月份
            document.querySelectorAll('.month-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // 显示当前月份
            const currentMonthKey = months[currentMonthIndex];
            document.getElementById(`month-${currentMonthKey}`).classList.add('active');
            
            // 更新月份显示
            updateMonthDisplay();
            
            // 平滑滚动到顶部
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // 添加键盘左右箭头翻页功能
        function handleKeyDown(e) {
            // 左箭头键 (KeyCode 37)
            if (e.keyCode === 37) {
                if (currentMonthIndex > 0) {
                    currentMonthIndex--;
                    switchMonth();
                }
            }
            // 右箭头键 (KeyCode 39)
            else if (e.keyCode === 39) {
                if (currentMonthIndex < months.length - 1) {
                    currentMonthIndex++;
                    switchMonth();
                }
            }
        }

        // 初始化页面
        function init() {
            if (months.length > 0) {
                renderAnnouncements();
                updateMonthDisplay();
                renderSidebarMonths();
                
                // 绑定月份翻页事件
                document.getElementById('prevMonth').addEventListener('click', () => {
                    if (currentMonthIndex > 0) {
                        currentMonthIndex--;
                        switchMonth();
                    }
                });
                
                document.getElementById('nextMonth').addEventListener('click', () => {
                    if (currentMonthIndex < months.length - 1) {
                        currentMonthIndex++;
                        switchMonth();
                    }
                });
                
                // 绑定键盘事件
                document.addEventListener('keydown', handleKeyDown);
                
                // 侧边栏交互事件
                document.getElementById('menuIcon').addEventListener('click', openSidebar);
                document.getElementById('closeBtn').addEventListener('click', closeSidebar);
                document.getElementById('overlay').addEventListener('click', closeSidebar);
            }
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>
